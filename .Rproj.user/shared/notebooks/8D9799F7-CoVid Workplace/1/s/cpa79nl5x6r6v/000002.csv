"0","library(plotly)"
"0","library(rjson)"
"0",""
"0","url <- 'https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json'"
"0","counties <- rjson::fromJSON(file=url)"
"0","g <- list("
"0","  scope = 'usa',"
"0","  projection = list(type = 'albers usa'),"
"0","  showlakes = TRUE,"
"0","  lakecolor = toRGB('blue')"
"0",")"
"0","fig <- plot_ly("
"0","  text = ~paste(US_counties$Combined_Key,'infection count:',US_counties$X9.4.21)"
"0",")"
"0","fig <- fig %>% add_trace("
"0","    type=""choropleth"","
"0","    geojson=counties,"
"0","    locations=US_counties$FIPS,"
"0","    z=US_counties$X9.20.20,"
"0","    colorscale=""heat"","
"0","    zmin=min(US_counties$X9.20.20),"
"0","    zmax=(quantile(US_counties$X9.20.20)[4]) + (6*((quantile(US_counties$X9.20.20)[4])-(quantile(US_counties$X9.20.20)[2]))),"
"0","    marker=list(line=list("
"0","      width=0)"
"0","    "
"0","    )"
"0","  )"
"0","fig <- fig %>% colorbar(title = ""Total Number of COVID-19 infections"")"
"0","fig <- fig %>% layout("
"0","   title = ""COVID-19 infections by county on """
"0",")"
"0",""
"0","fig <- fig %>% layout("
"0","    geo = g"
"0","  )"
"0",""
"0",""
"0","fig"
